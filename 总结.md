# 总结

### Time：2019-5-8

### 遇到的问题

~~~ java
/*
1，WEB-INF下的jsp界面来访问外部静态文件资源，比如js，CSS等等
	解决方案：
	首先在Spring.XML中配置静态资源的配置，配置如下：
	<!-- 静态资源的处理 --> 
	<mvc:default-servlet-handler /> 
	然后再引用资源的href中使用${pageContext.request.contextPath}/资源路径即可。
2，WEB-INF中jsp界面的跳转
	通过创建一个Controller来解决该问题
*/
~~~

### 完成的功能

~~~ java
/*
1，初步设计了本项目的开发过程，以及数据库表(User表)的设计
2，完成了SSM框架的搭建
3，登录界面的设计，注册界面的设计
4，完成了用户的注册功能
*/
~~~

### Time：2019-5-9

### 完成的功能

~~~ java
/*
1，在注册界面加入了线程池，来提高并发量，线程池采用的是CachedThreadPool，它是一个大小无界的线程池，适合于执行很多短期异步任务的小程序。MaxeimumPoolSize被设置程Integer.MAX_VALUE，corePool为0.
2，整合了shiro与SSM框架，主要是在WEB.XML中配置shiro拦截器，以及在xml中配置shiro的一些拦截配置，管理器，界面的用户权限。
~~~

### Time:2019-5-10

### 遇见的问题

~~~ java
/*
1，当shiro跳转loginurl的时候，会自动在url后面加上sessionID。
	解决办法：
	原因是ShiroHttpServletResponse中的toEncoded函数中处理url时会添加上sesionID这个信息
	重写ShiroHttpServletResponse中的toEncoded和encodeRedirectURL方法。
~~~



### 完成的功能

~~~ java
/*
1，实现shiroRealm对用户登录信息表单中数据的获取。
2，完成了shiro对一些界面权限的设置。
~~~

### Time:2019-5-11

### 记录

~~~ java
/*
1，jsp中引入另外一个jsp页面
	<%@ include file="url" %>
	
~~~

完成的功能

~~~java
/*
1,采用MD5算法对用户的密码加密*/
String hashAlgorithmName = "MD5";  //加密算法
String credentials = password;     //用户输入的密码
int hashIterations = 1024;         //加密的次数
Object Password = new SimpleHash(hashAlgorithmName, credentials, null, hashIterations);//进行加密
/*
2，当数据库中进行MD5加密之后，那么shiro在进行比对时，要将凭据的匹配credentialsMatcher方式设置成MD5方式，并且还要将加密的次数设置成1024(是为了与数据库中MD5加密的密码加密次数一致)*/

<bean id="jdbcRealm" class="Shiro.Realm.ShiroRealm">
		<property name="credentialsMatcher">
			<bean class="org.apache.shiro.authc.credential.HashedCredentialsMatcher">
				<property name="hashAlgorithmName" value="MD5"></property>
				<property name="hashIterations" value="1024"></property>
			</bean>
		</property>
	</bean>
/*
上面的方式当两个用户的密码一样的时候，MD5加密之后的字符串是一样的，所以为了保证每个用户的密码加密之后的相异性，要用到MD5盐值加密
*/
//在往数据库中对密码加密的时候，设置盐值（我设置的时用户的number，要求时盐值要唯一标识用户）
String hashAlgorithmName = "MD5";
String credentials = password;
int hashIterations = 1024;
Object salt = number;  //设置盐值
Object Password = new SimpleHash(hashAlgorithmName, credentials, salt, hashIterations);
//realm中也要对盐值进行相应的设置
Object principal = number;
//2，密码
String hashedCredentials = result.getBloguserpassword();
//3,当前Realm的名字
String realmName = getName();
//设置盐值
ByteSource credentialsSalt = ByteSource.Util.bytes(number);
SimpleAuthenticationInfo info = new SimpleAuthenticationInfo(principal, hashedCredentials, credentialsSalt, realmName);
~~~



